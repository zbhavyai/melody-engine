<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Melody Engine</title>
    <meta name="description" content="Prompt based instrumental music generation." />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css"
      integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="./styles.css" />
  </head>

  <body>
    <nav class="navbar navbar-dark justify-content-between app-navbar">
      <div class="container">
        <span class="app-navbar__brand">
          <i class="bi bi-music-note-beamed me-2"></i>
          Melody Engine
        </span>

        <span class="app-navbar__status">
          <i class="bi bi-circle-fill me-1"></i>
          Online
        </span>
      </div>
    </nav>

    <main class="container app-main">
      <div class="app-card">
        <div class="app-card__header">
          <span>
            <i class="bi bi-lightning-charge-fill me-2"></i>
            Create New Track
          </span>
        </div>

        <div class="app-card__body">
          <form id="generator-form" class="generator-form">
            <div class="mb-3">
              <label>Prompt description</label>
              <textarea
                id="prompt"
                class="form-control"
                rows="5"
                placeholder="Describe the music you want to generate..."
              ></textarea>
            </div>

            <div class="generator-form__row">
              <div>
                <label>Duration (seconds)</label>
                <input id="duration" type="number" class="form-control" value="3600" min="30" max="72000" />
              </div>

              <div>
                <label>Audio format</label>
                <select id="format" class="form-select">
                  <option value="mp3" selected>MP3</option>
                  <option value="wav">WAV</option>
                  <option value="flac">FLAC</option>
                </select>
              </div>

              <div>
                <label>Gain adjustment</label>
                <div class="generator-form__gain">
                  <input type="range" id="gain" min="-10" max="10" step="0.5" value="0" />
                  <span id="gain-val">0dB</span>
                </div>
              </div>
            </div>

            <button id="submit-btn" class="btn btn-primary generator-form__submit">
              <span class="btn-text">Queue Generation Job</span>
              <span class="spinner-border spinner-border-sm ms-2 d-none"></span>
            </button>
          </form>
        </div>
      </div>

      <div class="app-card">
        <div class="app-card__header">
          <span>
            <i class="bi bi-stack me-2"></i>
            Job Queue
            <span id="queue-count" class="badge bg-secondary ms-2">0</span>
          </span>

          <button id="clear-queue-btn" class="btn btn-sm btn-outline-danger">Clear All</button>
        </div>

        <div class="table-responsive">
          <table class="table app-table mb-0">
            <colgroup>
              <col class="col-status" />
              <col class="col-prompt" />
              <col class="col-created" />
              <col class="col-actions" />
            </colgroup>

            <thead>
              <tr>
                <th>Status</th>
                <th>Prompt</th>
                <th>Created at</th>
                <th class="text-end">Actions</th>
              </tr>
            </thead>
            <tbody id="queue-table-body"></tbody>
          </table>
        </div>
      </div>
    </main>

    <!-- Toast -->
    <div class="toast-container position-fixed bottom-0 end-0 p-3">
      <div id="toast" class="toast" role="alert">
        <div class="toast-header">
          <strong class="me-auto" id="toast-msg"></strong>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="toast"></button>
        </div>
      </div>
    </div>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI"
      crossorigin="anonymous"
    ></script>
    <script src="./script.js"></script>
  </body>
</html>
